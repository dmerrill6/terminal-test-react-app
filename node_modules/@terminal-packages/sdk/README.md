[![npm version](https://badge.fury.io/js/%40terminal-packages%2Fsdk.svg)](https://badge.fury.io/js/%40terminal-packages%2Fsdk)
![downloads](https://img.shields.io/npm/dw/@terminal-packages/sdk)
[![Twitter Follow](https://img.shields.io/twitter/follow/terminaldotco.svg?style=flat&label=Twitter&color=blue)](https://twitter.com/terminaldotco)
[![Discord Channel](https://img.shields.io/discord/572498612450492419.svg?style=flat&label=Discord&color=blue)](https://t.co/cJZ2MdBPkL?amp=1)

# ![Terminal-logo](https://storage.googleapis.com/terminal-assets/images/text-black-robot-light-face-black-horizontal.png)

| [Setup Guide](#setup-guide) | [Basic Wallet Providers](#terminalhttpprovider) | [MetaMask Provider](#metamask) | [Custom Http Providers](#with-your-own-http-provider) | [Websockets](#terminalwebsocketprovider) |

# TerminalSDK - Logging for Blockchain Infrastructure

Terminal is an developers platform for builing on Ethereum. Develop, test, and manage Ethereum artifacts and infrastructure in a unified workspace with Terminal. The Terminal toolkit provides developers with a broad range of utilities to construct robust and user-friendly decentralized applications or dapps.

TerminalSDK allows you to surface logs from arbitrary RPC endpoints and networks to your Terminal account. TerminalSDK is a simple drop-in wrapper around any Web3 provider with minimal configuration required on your part to get up and running.

- Drop in the Terminal subprovider to fetch logs for any RPC endpoint
- Surface logs for injected web3 providers
- Introduce cloud logging into your Truffle development environment
- Compatible with web3.js and ethers.js

## Setup Guide

### Step 1

To install, do the following:

npm:

```js
$ npm install @terminal-packages/sdk
```

yarn:

```js
$ yarn add @terminal-packages/sdk
```

### Step 2

Now that you've installed the sdk, you will need to signup for a Terminal account and generate an API key. You can make an account by going to https://terminal.co and clicking 'signup'. Once you have made an account, you can easily generate an API key by clicking on the profile icon in the top right corner and clicking 'settings'. You can then generate a new API key at the bottom of the page.

### Step 3

Once you've signed up and generated an API key, navigate to the logs page and click external sources. For more info you can check out the tech docs.

## TerminalHttpProvider Options

host: Any ethereum provider url of your choice
apiKey: An API key associated with your Terminal account
source: Any custom provider of your choice

## Changelog

View [changelog](CHANGELOG.md)

## Developer docs

View [develop-docs](DEVELOPER.MD)

## Contents

1. [TerminalHttpProvider](#terminalhttpprovider)
   - [web3](#web3-http)
   - [ethers](#ethers-http)
   - [Injected window.ethereum from other 3rd party wallets who use http provider](#injected-window.ethereum-from-other-3rd-party-wallets-who-use-http-provider)
2. [TerminalWebsocketProvider](#terminalwebsocketprovider)

   - [web3](#web3-websocket)
   - [ethers](#ethers-websocket)
   - [Injected window.ethereum from other 3rd party wallets who use websocket provider](#injected-window.ethereum-from-other-3rd-party-wallets-who-use-websocket-provider)

3. [MetaMask](#metamask)
   - [logging](#logging)

# TerminalHttpProvider

Hooking this custom provider up is super easy and once hooked up it will push all JSON-RPC calls to your logs in your Terminal account.

## web3 http

https://www.npmjs.com/package/web3

### Basic provider options

```ts
export enum SourceType {
  Terminal = 'Terminal',
  Truffle = 'Truffle',
  Alchemy = 'Alchemy',
  MetaMask = 'MetaMask',
  Infura = 'Infura'
}
```

#### JavaScript/TypeScript

```js
import { TerminalHttpProvider, SourceType } from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const Web3 = require('web3');

const web3 = new Web3(
  new sdk.TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal
  })
);
```

### With web3 provider options

- timeout - optional
- headers - optional
- withCredentials - optional

#### JavaScript/TypeScript

```js
import { TerminalHttpProvider, SourceType } from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: "YOUR_TERMINAL_PROJECT_ID",
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // options is not required
    options: {
      // timeout is not required
      timeout: 10000,
      // headers is not required
      headers: [{ name: 'x-custom-header' value: 'example' }],
      // with credentials is not required
      withCredentials: true
    }
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const Web3 = require('web3');

const web3 = new Web3(
  new sdk.TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: "YOUR_TERMINAL_PROJECT_ID",
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // options is not required
    options: {
      // timeout is not required
      timeout: 10000,
      // headers is not required
      headers: [{ name: 'x-custom-header' value: 'example' }],
      // with credentials is not required
      withCredentials: true
    }
  })
);
```

### With your own http provider

##### JavaScript/TypeScript

```js
import { TerminalHttpProvider, SourceType } from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalHttpProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    customHttpProvider: new YourCustomHttpProvider()
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const Web3 = require('web3');

const web3 = new Web3(
  new sdk.TerminalHttpProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    customHttpProvider: new YourCustomHttpProvider()
  })
);
```

### Non-prod environments

If you are a Terminal dev, you can run this against non-prod environments as well. The example below is with the basic provider options but `environment` can be passed in within any of the examples above:

Environment type enum:

```ts
export enum EnvironmentTypes {
  dev = 'dev',
  staging = 'staging',
  live = 'live'
}
```

#### JavaScript/TypeScript

```js
import {
  TerminalHttpProvider,
  EnvironmentTypes,
  SourceType
} from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    environment: EnvironmentTypes.dev
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const Web3 = require('web3');

const web3 = new Web3(
  new sdk.TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    environment: sdk.EnvironmentTypes.dev
  })
);
```

## ethers http

https://www.npmjs.com/package/ethers

### Basic provider options

```ts
export enum SourceType {
  Terminal = 'Terminal',
  Truffle = 'Truffle',
  Alchemy = 'Alchemy',
  MetaMask = 'MetaMask',
  Infura = 'Infura'
}
```

#### JavaScript/TypeScript

```js
import { TerminalHttpProvider, SourceType } from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const provider = new ethers.providers.Web3Provider(
  new TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const ethers = require('ethers');

const provider = new ethers.providers.Web3Provider(
  new sdk.TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal
  })
);
```

### With web3 provider options

- timeout - optional
- headers - optional
- withCredentials - optional

##### JavaScript/TypeScript

```js
import { TerminalHttpProvider, SourceType } from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const provider = new ethers.providers.Web3Provider(
  new TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: "YOUR_TERMINAL_PROJECT_ID",
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // options is not required
    options: {
      // timeout is not required
      timeout: 10000,
      // headers is not required
      headers: [{ name: 'x-custom-header' value: 'example' }],
      // with credentials is not required
      withCredentials: true
    }
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const ethers = require('ethers');

const provider = new ethers.providers.Web3Provider(
  new sdk.TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: "YOUR_TERMINAL_PROJECT_ID",
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // options is not required
    options: {
      // timeout is not required
      timeout: 10000,
      // headers is not required
      headers: [{ name: 'x-custom-header' value: 'example' }],
      // with credentials is not required
      withCredentials: true
    }
  })
);
```

### With your own http provider

#### JavaScript/TypeScript

```js
import { TerminalHttpProvider } from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const provider = new ethers.providers.Web3Provider(
  new TerminalHttpProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    customHttpProvider: new YourCustomHttpProvider()
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const ethers = require('ethers');

const provider = new ethers.providers.Web3Provider(
  new sdk.TerminalHttpProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    customHttpProvider: new YourCustomHttpProvider()
  })
);
```

### Non-prod Environments

If you are a Terminal dev, you can run this against non-prod environments as well. The example below is with the basic provider options but `environment` can be passed in within any of the examples above:

Environment type enum:

```ts
export enum EnvironmentTypes {
  dev = 'dev',
  staging = 'staging',
  live = 'live'
}
```

#### JavaScript/TypeScript

```js
import {
  TerminalHttpProvider,
  EnvironmentTypes,
  SourceType
} from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const provider = new ethers.providers.Web3Provider(
  new TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    environment: EnvironmentTypes.dev
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const ethers = require('ethers');

const provider = new ethers.providers.Web3Provider(
  new sdk.TerminalHttpProvider({
    host: 'https://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    environment: sdk.EnvironmentTypes.dev
  })
);
```

## Injected window.ethereum from other 3rd party wallets who use http provider

Please note that if you're using MetaMask please follow the guide [here](#metamask).

Our provider handle any injected custom provider in the window. If you're using a 3rd party wallet which injects the custom provider in the `window.ethereum` you can use that with our provider. All you have to do is pass in the `window.ethereum` into the `customHttpProvider` option within the `TerminalHttpProvider` class. Example below shows how you would do this:

## Web3

```js
import { TerminalHttpProvider, SourceType } from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalHttpProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    customHttpProvider: window.ethereum
  })
);
```

## Ether

```js
import { TerminalHttpProvider, SourceType } from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const provider = new ethers.providers.Web3Provider(
  new TerminalHttpProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    customHttpProvider: window.ethereum
  })
);
```

# TerminalWebsocketProvider

Due to the rewrite of web3 for 2.0 the code on web3 1 vs web3 2 is very different, this means we have to go down different paths of code depending on the version you use. We made this super easy for you to tell us in the examples below. By default if you do not supply it then it will default to 2.0. This is the main difference between the `TerminalHttpProvider` and `TerminalWebsocketProvider` interface and how you set it up. Please note if your on `1.0-beta` version you do not need to supply the `web3` version.

## web3 websocket

https://www.npmjs.com/package/web3

```ts
export enum SourceType {
  Terminal = 'Terminal',
  Truffle = 'Truffle',
  Alchemy = 'Alchemy',
  MetaMask = 'MetaMask',
  Infura = 'Infura'
}
```

Please note if your on `1.0-beta` then `Web3Versions.two` is the correct version if you ever want to supply the `Web3Versions` to a call.

```ts
export enum Web3Versions {
  one = '1',
  two = '2'
}
```

### Basic provider options

#### JavaScript/TypeScript

```js
import {
  TerminalWebsocketProvider,
  SourceType,
  Web3Versions
} from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalWebsocketProvider({
    host: 'wss://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const Web3 = require('web3');

const web3 = new Web3(
  new sdk.TerminalWebsocketProvider({
    host: 'wss://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one
  })
);
```

### With web3 provider options

- timeout - optional
- headers - optional
- protocol - optional
- clientConfig - optional

#### JavaScript/TypeScript

```js
import { TerminalWebsocketProvider, SourceType, Web3Versions } from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalWebsocketProvider({
    host: 'wss://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: "YOUR_TERMINAL_PROJECT_ID",
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    // options not required
    options: {
      // timeout not required
      timeout: 10000,
      // headers not required
      headers: [{ name: 'x-custom-header' value: 'example' }],
      // protocol not required
      protocol: '63',
      // client config not required
      clientConfig: {
        maxReceivedFrameSize: 100000000,
        maxReceivedMessageSize: 100000000
      },
    }
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const Web3 = require('web3');

const web3 = new Web3(
  new sdk.TerminalWebsocketProvider({
    host: 'wss://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: "YOUR_TERMINAL_PROJECT_ID",
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    // options not required
    options: {
      // timeout not required
      timeout: 10000,
      // headers not required
      headers: [{ name: 'x-custom-header' value: 'example' }],
      // protocol not required
      protocol: '63',
      // client config not required
      clientConfig: {
        maxReceivedFrameSize: 100000000,
        maxReceivedMessageSize: 100000000
      },
    }
  })
);
```

### With your own websocket provider

##### JavaScript/TypeScript

```js
import {
  TerminalHttpProvider,
  SourceType,
  Web3Versions
} from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalWebsocketProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    customWebsocketProvider: new YourCustomWebsocketProvider()
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const Web3 = require('web3');

const web3 = new Web3(
  new sdk.TerminalWebsocketProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    customWebsocketProvider: new YourCustomWebsocketProvider()
  })
);
```

## Ethers websocket

https://www.npmjs.com/package/ethers

### Basic provider options

```ts
export enum SourceType {
  Terminal = 'Terminal',
  Truffle = 'Truffle',
  Alchemy = 'Alchemy',
  MetaMask = 'MetaMask',
  Infura = 'Infura'
}
```

Please note if your on `1.0-beta` then `Web3Versions.two` is the correct version if you ever want to supply the `Web3Versions` to a call.

```ts
export enum Web3Versions {
  one = '1',
  two = '2'
}
```

#### JavaScript/TypeScript

```js
import {
  TerminalWebsocketProvider,
  SourceType,
  Web3Versions
} from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const provider = new ethers.providers.Web3Provider(
  new TerminalWebsocketProvider({
    host: 'wss://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const ethers = require('ethers');

const provider = new ethers.providers.Web3Provider(
  new sdk.TerminalWebsocketProvider({
    host: 'wss://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one
  })
);
```

### With web3 provider options

- timeout - optional
- headers - optional
- withCredentials - optional

#### JavaScript/TypeScript

```js
import { TerminalWebsocketProvider, SourceType, Web3Versions } from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const web3 = new ethers.providers.Web3Provider(
  new TerminalWebsocketProvider({
    host: 'wss://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: "YOUR_TERMINAL_PROJECT_ID",
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    // options not required
    options: {
      // timeout not required
      timeout: 10000,
      // headers not required
      headers: [{ name: 'x-custom-header' value: 'example' }],
      // protocol not required
      protocol: '63',
      // client config not required
      clientConfig: {
        maxReceivedFrameSize: 100000000,
        maxReceivedMessageSize: 100000000
      },
    }
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const ethers = require('ethers');

const web3 = new ethers.providers.Web3Provider(
  new sdk.TerminalWebsocketProvider({
    host: 'wss://yourethnodeurl.io',
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: "YOUR_TERMINAL_PROJECT_ID",
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    // options not required
    options: {
      // timeout not required
      timeout: 10000,
      // headers not required
      headers: [{ name: 'x-custom-header' value: 'example' }],
      // protocol not required
      protocol: '63',
      // client config not required
      clientConfig: {
        maxReceivedFrameSize: 100000000,
        maxReceivedMessageSize: 100000000
      },
    }
  })
);
```

### With your own websocket provider

##### JavaScript/TypeScript

```js
import {
  TerminalHttpProvider,
  SourceType,
  Web3Versions
} from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const web3 = new ethers.providers.Web3Provider(
  new TerminalWebsocketProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    customWebsocketProvider: new YourCustomWebsocketProvider()
  })
);
```

#### Node

```js
const sdk = require('@terminal-packages/sdk');
const ethers = require('ethers');

const web3 = new ethers.providers.Web3Provider(
  new sdk.TerminalWebsocketProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    customWebsocketProvider: new YourCustomWebsocketProvider()
  })
);
```

## Injected window.ethereum from other 3rd party wallets who use websocket provider

Please note that if you're using MetaMask please follow the guide [here](#metamask) and they only support http provider.

Our provider handle any injected custom provider in the window. If you're using a 3rd party wallet which injects the custom provider in the `window.ethereum` you can use that with our websocket provider. All you have to do is pass in the `window.ethereum` into the `customWebsocketProvider` option within the `TerminalWebsocketProvider` class. Please note your `window.ethereum` provider must support websockets for this to work. Example below shows how you would do this:

## Web3

```js
import {
  TerminalWebsocketProvider,
  SourceType,
  Web3Versions
} from '@terminal-packages/sdk';
import Web3 from 'web3';

const web3 = new Web3(
  new TerminalWebsocketProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    customWebsocketProvider: window.ethereum
  })
);
```

## Ether

```js
import {
  TerminalWebsocketProvider,
  SourceType,
  Web3Versions
} from '@terminal-packages/sdk';
import { ethers } from 'ethers';

const provider = new ethers.providers.Web3Provider(
  new TerminalWebsocketProvider({
    apiKey: 'yourApiKey',
    // projectId is not required to log but we suggest
    // using it for the best experience
    projectId: 'YOUR_TERMINAL_PROJECT_ID',
    // source can be a dynamic string as well
    source: SourceType.Terminal,
    // if your using web3 1 (NONE BETA) please tell us, if you're not please delete this property
    web3Version: sdk.Web3Versions.one,
    customWebsocketProvider: window.ethereum
  })
);
```

# MetaMask

https://metamask.io/

## Logging

### MetaMask options:

```ts
export interface IMetaMaskOptions {
  apiKey: string;
  projectId?: string | undefined;
  environmentType?: EnvironmentTypes | undefined;
}
```

If your dapp is using `MetaMask` as the wallet signer, you will not be able to use the custom provider code explained above in the `TerminalHttpProvider` section. `MetaMask` injects it's own `web3` instance onto the global window of the browser (`window.web3`) and our script wraps that `web3` instance with our `TerminalHttpProvider` so we can start logging `jsonrpc` calls for you. Don't worry, `MetaMask` will do all the calls still, we just proxy the request and the response so we can log it.

Please note that if you're only using the logging `MetaMask` feature, you do **not** need to install the `sdk` as well, you can literally drop the script below in your website and start logging.

To get all the amazing logging in your dapp, all you need to do is paste this script within the `<head>` tag of your website:

```js
<!-- TERMINAL SCRIPTS -->
  <script src="https://storage.googleapis.com/terminal-sdk/metamask/latest/metamask-latest.min.js"></script>
  <script type="text/JavaScript">
      window.terminal.sdk.metamask.startLogging({apiKey: 'YOUR_API_KEY', projectId: 'YOUR_PROJECT_ID'});
  </script>
<!-- END TERMINAL SCRIPTS -->
```

By default it will use the `live` environment but if you want to use `dev` or `staging` you can set the `environmentType`

dev:

```js
window.terminal.sdk.metamask.startLogging({
  apiKey: 'YOUR_API_KEY',
  projectId: 'YOUR_PROJECT_ID',
  environmentType: 'dev'
});
```

staging:

```js
window.terminal.sdk.metamask.startLogging({
  apiKey: 'YOUR_API_KEY',
  projectId: 'YOUR_PROJECT_ID',
  environmentType: 'staging'
});
```

If you want to use a fixed version of the `MetaMask` script you can. We deploy every version of the script to the CDN store against the same version as the `sdk` when that's deployed. You can hook in those fixed versions by replacing `{{versionInfo}}` with your version number you want to use.

```js
<script src="https://storage.googleapis.com/terminal-sdk/metamask/{{versionNumber}}/metamask-{{versionNumber}}.min.js"></script>
```
